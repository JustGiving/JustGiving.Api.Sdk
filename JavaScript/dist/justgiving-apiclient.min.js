/**
 * justgiving-apiclient - JustGiving API Client
 * @version v0.5.0
 * @link https://api.justgiving.com/
 * @license Apache v2.0
 */
!function(t,e){if("function"==typeof define&&define.amd)define("JustGiving",["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var n={exports:{}};e(n.exports),t.JustGiving=n.exports}}(this,function(t){"use strict";var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var n=function r(t,n){e(this,r),this.pageSizeRestriction=n?"pageSize="+n+"&":"",this.pageNumRestriction=t?"pageNum="+t+"&":"",this.pageRestriction=t?"page="+t+"&":"",this.limitRestriction=n?"limit="+n+"&":"",this.offsetRestriction=t?"offset="+t+"&":""},o=function(){function t(n,o,r){if(e(this,t),"string"!=typeof n)throw new Error("URL is required");if(0!==n.indexOf("https"))throw new Error("Please use https only");this._url=n,this._appId=o,this._accessToken=r,this._version="v1"}return t.prototype._getOptions=function(t,e){var n={method:e||"GET",headers:{"x-app-id":this._appId,Accept:"application/json"}};return this._accessToken&&(n.headers.Authorization=this._accessToken),(t||"POST"===e)&&(n.method=e||"POST",n.body=JSON.stringify(t),n.headers["Content-Type"]="application/json"),n},t.prototype._handleResponse=function(t){if(t.status>=400){var e=t.headers.get("content-type");if(e&&0===e.indexOf("application/json"))return t.json().then(function(e){if(e[0])throw new Error(""+t.status+" "+t.statusText+". "+e[0].id+" : "+e[0].desc)});throw new Error(""+t.status+" "+t.statusText)}return t.json()},t.prototype._fetch=function(t,e,n){return fetch(""+this._url+"/"+this._version+"/"+t,this._getOptions(e,n)).then(this._handleResponse)},t.prototype.validateAccount=function(t,e){return this._fetch("account/validate",{email:t,password:e})},t.prototype.getFundraisingPagesForUser=function(t,e){var n=e?"?charityId="+e:"";return this._fetch("account/"+t+"/pages"+n)},t.prototype.getDonationsForUser=function(t,e,o){var r=o?"charityId="+o+"&":"",i=new n(e,t);return this._fetch("account/donations?"+i.pageSizeRestriction+i.pageNumRestriction+r)},t.prototype.checkAccountAvailability=function(t){return this._fetch("account/"+encodeURIComponent(t))},t.prototype.getContentFeed=function(){return this._fetch("account/feed")},t.prototype.getAccountRating=function(t,e){var o=new n(e,t);return this._fetch("account/rating?"+o.pageSizeRestriction+o.pageRestriction)},t.prototype.getAccount=function(){return this._fetch("account")},t.prototype.getInterests=function(){return this._fetch("account/interest")},t.prototype.addInterest=function(t){return this._fetch("account/interest",{interest:t})},t.prototype.replaceInterests=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return this._fetch("account/interest",e,"PUT")},t.prototype.requestPasswordReminder=function(t){return this._fetch("account/"+t+"/requestpasswordreminder")},t.prototype.changePassword=function(t,e,n){if(!t||!e||!n)throw new Error("All parameters are required");return this._fetch("account/changePassword?emailaddress="+t+"&currentpassword="+encodeURIComponent(e)+"&newpassword="+encodeURIComponent(n),void 0,"POST")},t.prototype.getCountries=function(){return this._fetch("countries")},t.prototype.getCurrencies=function(){return this._fetch("fundraising/currencies")},t.prototype.getCharityCategories=function(){return this._fetch("charity/categories")},t.prototype.getCharity=function(t){return this._fetch("charity/"+t)},t.prototype.getEventsByCharity=function(t,e,o){var r=new n(o,e);return this._fetch("charity/"+t+"/events?"+r.pageSizeRestriction+r.pageNumRestriction)},t.prototype.getDonation=function(t){return this._fetch("donation/"+t)},t.prototype.getDonationByReference=function(t){return this._fetch("donation/ref/"+encodeURIComponent(t))},t.prototype.getDonationStatus=function(t){return this._fetch("donation/"+t+"/status")},t.prototype.getEvent=function(t){return this._fetch("event/"+t)},t.prototype.getEventPages=function(t,e,o){var r=new n(o,e);return this._fetch("event/"+t+"/pages?"+r.pageSizeRestriction+r.pageRestriction)},t.prototype.registerEvent=function(t){return this._fetch("event",t)},t.prototype.getFundraisingPages=function(){return this._fetch("fundraising/pages")},t.prototype.getFundraisingPage=function(t){return this._fetch("fundraising/pages/"+encodeURIComponent(t))},t.prototype.suggestPageShortName=function(t){return this._fetch("fundraising/pages/suggest?preferredName="+encodeURIComponent(t))},t.prototype.checkPageExists=function(t){return this._fetch("fundraising/pages/"+t,void 0,"HEAD")},t.prototype.cancelFundraisingPage=function(t){return this._fetch("fundraising/pages/"+t,void 0,"DELETE")},t.prototype.addFundraisingPageImage=function(t,e,n,o){return this._fetch("fundraising/pages/"+t+"/images",{caption:e,isDefault:!!o,url:n},"PUT")},t.prototype.onesearch=function(t,e,n,o,r,i){return this._fetch("onesearch?q="+encodeURIComponent(t)+"&g="+encodeURIComponent(e)+"&i="+encodeURIComponent(n)+"&limit="+o+"&offset="+r+"&country="+i)},t.prototype.getProject=function(t){return this._fetch("project/global/"+t)},t.prototype.searchCharities=function(t,e,o,r,i){var s=new n(r,i),c=e.length?e.map(function(t){return"charityId="+t+"&"}).join(""):"charityId="+e+"&",a=o.length?o.map(function(t){return"categoryId="+t+"&"}).join(""):"categoryId="+o+"&";return this._fetch("charity/search?q="+encodeURIComponent(t)+"&"+a+c+s.pageSizeRestriction+s.pageRestriction)},t.prototype.searchEvents=function(t,e,o){var r=new n(e,o);return this._fetch("event/search?q="+encodeURIComponent(t)+"&"+r.pageSizeRestriction+r.pageRestriction)},t.prototype.oneSearch=function(t,e,o,r,i,s){var c=new n(i,r);return this._fetch("onesearch?q="+t+"&g="+e+"&i="+o+"&"+c.limitRestriction+c.offsetRestriction+"country="+s)},t.prototype.getTeam=function(t){return this._fetch("team/"+encodeURIComponent(t))},t.prototype.checkTeamExists=function(t){return this._fetch("team/"+encodeURIComponent(t),void 0,"HEAD")},t.prototype.createOrUpdateTeam=function(t,e){return this._fetch("team/"+encodeURIComponent(t),e,"PUT")},t.prototype.joinTeam=function(t,e){return this._fetch("team/join/"+encodeURIComponent(t),{pageShortName:e},"PUT")},t}();t.ApiClient=o});